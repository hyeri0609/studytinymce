<!DOCTYPE html>
<html>
<head>
            <title>study tinymce</title>

<script src='js/tinymce/tinymce.min.js'></script>
<script type="text/javascript">
    tinymce.init({
        selector: '#mytextarea',
        toolbar: 'undo redo | bold italic underline strikethrough',
        menubar: false,
        width: 200,
        height: 100,
        statusbar: false
    });
    tinymce.init({
        selector: '#myeditablediv',
        inline: true
        
    });
</script>

</head>

<body>
<h1>TinyMCE Quick Start Guide</h1>
<form>
<textarea id="mytextarea"></textarea>
<br/>
<button type="button" onclick="submitData()">submit</button> 
<br/>
</form>
<br/><hr/>
<form method="post">
<div id="myeditablediv">Click here to edit!</div>
</form>
  <p onclick="check()">check</p>
  

<script type="text/javascript">
function check() {
  var editor = tinymce.get('mytextarea');
  var content = editor.getContent();
  console.log(content);
}
function submitData() {
    var xhr = new XMLHttpRequest();

    xhr.onreadystatechange = function() {
        if (xhr.readyState == XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE == 4
           if (xhr.status == 200) {
               console.log(xhr.responseText);
           }
           else if (xhr.status == 400) {
              alert('There was an error 400');
           }
           else {
               alert('something else other than 200 was returned, status: ' + xhr.status);
           }
        }
    };

    xhr.open("POST", "/api/textformat", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    var editor = tinymce.get('mytextarea');
    var content = editor.getContent();
    xhr.send("data="+content);
}
</script>
</body>
</html>
